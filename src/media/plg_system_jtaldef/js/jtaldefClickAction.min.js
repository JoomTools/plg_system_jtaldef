/**
 * Automatic local download external files
 *
 * @package     Joomla.Plugin
 * @subpackage  System.Jtaldef
 *
 * @author      Guido De Gobbis <support@joomtools.de>
 * @copyright   (c) 2020 JoomTools.de - All rights reserved.
 * @license     GNU General Public License version 3 or later
 */
var Jtaldef=window.Jtaldef||{};function plgJtaldefReady(e){"loading"!=document.readyState?e():document.addEventListener("DOMContentLoaded",e)}!function(e,t){"use strict";e.clearCache=function(){var e=t.querySelector("#jtaldefClearCache"),n=t.querySelector(".jtaldef-counter"),a=window.Joomla.getOptions("csrf.token",""),s=t.createElement("style"),r=t.createElement("span"),i=t.createElement("span"),l=t.createElement("span");s.setAttribute("type","text/css"),s.appendChild(t.createTextNode(".jtaldef-spinner {\n  display: inline-block;\n  height: 14px;\n  vertical-align: middle;\n  line-height: 18px;\n  margin-left: 4px;\n}\n.jtaldef.icon-save::before {\n  padding-left: 8px;\n}\n.jtaldef-spinner > span {\n  background-color: #fff;\n  margin-left: 2px;\n  height: 100%;\n  width: 3px;\n  display: inline-block;\n  -webkit-animation: jtaldef-sk-stretchdelay 1.2s infinite ease-in-out;\n  animation: jtaldef-sk-stretchdelay 1.2s infinite ease-in-out;\n}\n.jtaldef-spinner .rect2 {\n  -webkit-animation-delay: -1.1s;\n  animation-delay: -1.1s;\n}\n.jtaldef-spinner .rect3 {\n  -webkit-animation-delay: -1.0s;\n  animation-delay: -1.0s;\n}\n@-webkit-keyframes jtaldef-sk-stretchdelay {\n  0%, 40%, 100% { -webkit-transform: scaleY(0.4) }  \n  20% { -webkit-transform: scaleY(1.0) }\n}\n@keyframes jtaldef-sk-stretchdelay {\n  0%, 40%, 100% { \n    transform: scaleY(0.4);\n    -webkit-transform: scaleY(0.4);\n  }  20% { \n    transform: scaleY(1.0);\n    -webkit-transform: scaleY(1.0);\n  }\n}")),t.head.appendChild(s),r.setAttribute("class","jtaldef-spinner"),r.setAttribute("aria-hidden","true"),r.innerHTML='<span class="rect1"></span><span class="rect2"></span><span class="rect3"></span>',l.setAttribute("class","jtaldef icon-save"),l.setAttribute("aria-hidden","true"),i.setAttribute("class","error"),i.setAttribute("aria-hidden","true");var d=e.getAttribute("data-action");e.addEventListener("click",function(t){t.stopPropagation(),t.preventDefault(),e.appendChild(r),e.setAttribute("disabled",!0),window.Joomla.request({url:d,headers:{"X-CSRF-Token":a},onError:function(e){console.error("ERROR: ",e)},onSuccess:function(t){var a;try{t=JSON.parse(t)}catch(e){t={succsess:!0}}e.removeChild(r),!0===t.success&&(n.innerHTML="0",e.setAttribute("class","btn btn-secondary"),e.appendChild(l),a=l),!1===t.success&&(console.error("ERROR: ",t.message),i.innerHTML='<span style="margin-left:8px;color:red;">'+t.message+"</span>",e.parentNode.appendChild(i),a=i),a!==i&&setTimeout(function(){e.removeChild(a)},4e3)}})})}}(Jtaldef,document),plgJtaldefReady(Jtaldef.clearCache);
